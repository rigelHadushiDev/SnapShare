<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stream Image with Axios</title>
</head>
<body>
    <img id="image" src="" alt="Image">
    
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        // Bearer token
        const token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3QhIiwidXNlcklkIjoyLCJpYXQiOjE3MTQ2ODY2MDIsImV4cCI6MTcxNTA0NjYwMn0.Ankwk8DJG5KCvvPgaQwIsgccmTh4ZaaB2DOPSbpuzUw';

        // URL of the image
        const imageUrl = 'http://127.0.0.1:3000/post/display/1882b91b7f49d479cf1ec2f1ecee30d0e5392e963a2109015b7149bf712ad1b6/4719041f-0845-46bd-becf-6c33ebd98373_2024_05_02_23_52_22.jpg';

        // Headers with Bearer token
        const headers = {
            'Authorization': `Bearer ${token}`
        };

        // Function to fetch and stream the image
        async function fetchAndStreamImage() {
            try {
                const response = await axios.get(imageUrl, { headers, responseType: 'blob' });

                if (response.status === 200) {
                    const imageData = response.data;

                    // Create a blob URL for the image
                    const blobUrl = URL.createObjectURL(imageData);
                    
                    // Assign the blob URL to the image src
                    document.getElementById('image').src = blobUrl;
                } else {
                    console.error('Error fetching image:', response.statusText);
                }
            } catch (error) {
                console.error('Error fetching image:', error);
            }
        }

        // Call the fetchAndStreamImage function when the page loads
        window.onload = fetchAndStreamImage;
    </script>
</body>
</html>
